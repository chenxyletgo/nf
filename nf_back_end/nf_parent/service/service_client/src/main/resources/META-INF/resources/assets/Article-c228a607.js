import{d as w,r as $,w as p,e as v,f as t,t as o,h as g,k as P,x as G,c,p as z,j as S,_ as A,u as h,J as b,O as J,P as Q,G as W,Q as j,R as B,n as I,S as D,T as a,U as R,z as k,V as N,o as U,F as V,g as L,m as y,q as H}from"./index-7043f5d2.js";import{E as T}from"./el-select-790cb6c3.js";import"./el-input-ea2dabc9.js";import"./el-scrollbar-a3a91b86.js";import{b as K}from"./articleapi-65b59442.js";import{a as X,g as E}from"./commentapi-08f1f9c1.js";import{a as Y}from"./likeaapi-e991004f.js";const F=e=>(z("data-v-849b2b64"),e=e(),S(),e),Z={class:"content-body"},ee={class:"title"},te={class:"info min-font"},ae={class:"author"},se={class:"left"},ne={class:"img-div"},de=["href"],oe=["src"],ie={class:"author-info"},le={class:"name"},ce=["href"],re={class:"info-info min-font"},ue=F(()=>t("div",{class:"right"},null,-1)),me=F(()=>t("div",{class:"div-line"},null,-1)),ve={class:"content"},fe=w({__name:"Text",props:{data:null,initLikeAcitve:{type:Boolean}},setup(e){const d=e;let n;const l=$(0);function u(s){Y(s).then(i=>{l.value++,d.data.likeActive=!d.data.likeActive})}return p(l,(s,i)=>{i===0&&(n=!d.data.likeActive),n?l.value%2===0?d.data.like++:d.data.like--:l.value%2===0?d.data.like--:d.data.like++}),(s,i)=>{const _=G("v-md-editor");return c(),v("div",Z,[t("div",ee,[t("h1",null,o(e.data.title),1),t("div",te,[t("span",null,o(e.data.time),1),t("span",null,o(e.data.watch)+" 阅读",1),e.data.likeActive?(c(),v("span",{key:0,onClick:i[0]||(i[0]=r=>u(e.data.id)),class:"on like"},o(e.data.like===null?"0":e.data.like)+" 喜欢",1)):g("",!0),e.data.likeActive?g("",!0):(c(),v("span",{key:1,onClick:i[1]||(i[1]=r=>u(e.data.id)),class:"like"},o(e.data.like===null?"0":e.data.like)+" 喜欢",1)),t("span",null,o(e.data.commentCount===null?"0":e.data.commentCount)+" 评论",1)])]),t("div",ae,[t("div",se,[t("div",ne,[t("a",{href:"/user/"+e.data.userId},[t("img",{src:e.data.userAvatar===null?"/defaultavatar.jpg":e.data.userAvatar},null,8,oe)],8,de)]),t("div",ie,[t("div",le,[t("a",{href:"/user/"+e.data.userId},o(e.data.userName),9,ce)]),t("div",re,[t("span",null,"粉丝："+o(e.data.userFanCount),1),t("span",null,"文章："+o(e.data.userArticleCount),1)])])]),ue]),me,t("div",ve,[P(_,{"model-value":e.data.text,mode:"preview"},null,8,["model-value"])])])}}});const he=A(fe,[["__scopeId","data-v-849b2b64"]]),_e={class:"reply-body"},ge={class:"postion-div"},Ce={class:"user-face"},ke=["src"],Ie={class:"text-div"},ye=w({__name:"Reply",props:{data:null},setup(e){const d=e,n=$();function l(){let u={words:n.value};X(Object.assign(d.data,u)).then(s=>{W.success(s.message),n.value="",d.data.ruserId==="no1"?j.value++:B.value++})}return(u,s)=>(c(),v("div",_e,[t("div",ge,[t("div",Ce,[t("img",{src:h(b).avatar===null||h(b).avatar===""?"/defaultavatar.jpg":h(b).avatar},null,8,ke)]),t("div",Ie,[J(t("textarea",{class:"text-area","onUpdate:modelValue":s[0]||(s[0]=i=>n.value=i),cols:"80",rows:"5",placeholder:"发一条评论"},`\r
                `,512),[[Q,n.value]]),t("div",{class:"button-div"},[t("button",{type:"submit",onClick:l},"发表评论")])])])]))}});const O=A(ye,[["__scopeId","data-v-5f08cf00"]]),$e={class:"postion-div"},pe=["href"],we=["src"],Ae={class:"content"},xe=["href"],be=["href"],Pe={class:"info"},ze=w({__name:"SonComment",props:{data:null},setup(e){const d=e;return(n,l)=>(c(),v("div",null,[t("div",$e,[t("a",{href:"/user/"+e.data.userId},[t("img",{class:"avatar",src:e.data.userAvatar===null?"/defaultavatar.jpg":e.data.userAvatar},null,8,we)],8,pe),t("div",Ae,[t("a",{href:"/user/"+e.data.userId},o(e.data.userName),9,xe),e.data.ruserId!==null?(c(),v("a",{key:0,href:"/user/"+e.data.ruserId},o("回复 "+e.data.ruserName),9,be)):g("",!0),t("span",null,o(e.data.words),1)]),t("div",Pe,[t("span",null,o(e.data.time),1),t("span",{class:I(e.data.active===0?"like on":"like")},"赞："+o(e.data.like),3),t("span",{class:I(e.data.active===1?"like on":"like")},"踩："+o(e.data.dislike),3),t("span",{class:"replay-btn",style:D(h(a).commProId===h(d).data.id?"color: #00a1d6":""),onClick:l[0]||(l[0]=u=>h(R)(e.data.id,e.data.userId,e.data.fatherId))},"回复",4)])])]))}});const Se=A(ze,[["__scopeId","data-v-bd05d68e"]]),Ne=e=>(z("data-v-8a107229"),e=e(),S(),e),je={class:"comment-body"},Be={class:"avatar"},De=["href"],Re=["src"],Ue={class:"content"},Ve=Ne(()=>t("div",{class:"content-postion"},null,-1)),Le={class:"user-name"},Te=["href"],Ee={class:"comment-item"},Fe={class:"comment-info"},Oe={class:"replay-body"},Me={key:0,class:"reply-div"},qe=w({__name:"Comment",props:{data:null},setup(e){const d=e,n=$([]),l=$(!1),u=k({id:"",ruserId:"no2"}),s=k({id:"",level:1,sort:1,total:0,size:14,cur:1});function i(_=1){E(s,_,s.size).then(r=>{n.value=r.data.list,s.total=r.data.total})}return p(N,()=>{if(a.reCreate){a.commId===d.data.id&&(l.value=!1,a.newCreate.commProId===""?(a.haveReply=!0,a.commId=a.newCreate.commId,a.isCommPro=!1,a.commProId="",a.ruserId=a.newCreate.ruserId,a.reCreate=!1,a.newCreate.commId="",a.newCreate.commProId="",a.newCreate.ruserId=""):(a.haveReply=!0,a.commId=a.newCreate.commId,a.isCommPro=!0,a.commProId=a.newCreate.commProId,a.ruserId=a.newCreate.ruserId,a.reCreate=!1,a.newCreate.commId="",a.newCreate.commProId="",a.newCreate.ruserId=""),N.value++);return}a.haveReply?a.commId===d.data.id&&(l.value=!0,u.ruserId=a.ruserId):a.commId===d.data.id&&(l.value=!1,a.commId="",a.isCommPro=!1,a.commProId="",a.ruserId="")}),p(B,()=>{i(s.cur)}),U(()=>{s.id=d.data.id,u.id=d.data.id,i()}),(_,r)=>{const x=T;return c(),v("div",je,[t("div",Be,[t("a",{href:"/user/"+e.data.userId},[t("img",{src:e.data.userAvatar===null?"/defaultavatar.jpg":e.data.userAvatar},null,8,Re)],8,De)]),t("div",Ue,[Ve,t("div",Le,[t("a",{href:"/user/"+e.data.userId},o(e.data.userName),9,Te)]),t("div",Ee,o(e.data.words),1),t("div",Fe,[t("span",null,o(e.data.time),1),t("span",{class:I(e.data.active===0?"like on":"like")},"赞："+o(e.data.like===null?"0":e.data.like),3),t("span",{class:I(e.data.active===1?"like on":"like")},"踩："+o(e.data.dislike),3),t("span",{class:"replay-btn",style:D(h(a).commId===h(d).data.id&&h(a).commProId===""?"color: #00a1d6":""),onClick:r[0]||(r[0]=f=>h(R)(e.data.id,"no2"))},"回复",4)])]),t("div",Oe,[(c(!0),v(V,null,L(n.value,(f,m)=>(c(),y(Se,{data:f},null,8,["data"]))),256)),l.value?(c(),v("div",Me,[l.value?(c(),y(O,{key:0,data:u},null,8,["data"])):g("",!0)])):g("",!0),s.total>s.size?(c(),y(x,{key:1,class:"page-div","current-page":s.cur,"onUpdate:currentPage":r[1]||(r[1]=f=>s.cur=f),"page-size":s.size,"onUpdate:pageSize":r[2]||(r[2]=f=>s.size=f),layout:"prev, pager, next",total:s.total,onCurrentChange:i},null,8,["current-page","page-size","total"])):g("",!0)])])}}});const Ge=A(qe,[["__scopeId","data-v-8a107229"]]),Je=e=>(z("data-v-606761cd"),e=e(),S(),e),Qe={class:"news-body"},We={class:"header"},He=["href"],Ke=Je(()=>t("span",{class:"dividers"},"/",-1)),Xe={class:"content"},Ye={class:"comment"},Ze={class:"comment-head"},et={class:"comment-content"},tt={class:"sort"},at={class:"reply"},st={class:"comment-list"},nt={key:0,class:"div-100"},dt=w({__name:"Article",setup(e){const d=H(),n=k({id:"",title:"",text:"",userId:"",userAvatar:"",userName:"",time:"",watch:0,like:0,likeActive:!1,commentCount:0,userFanCount:0,fanActive:!1,userArticleCount:0,firstCateId:"",firstCateName:"",firstCatePathName:""}),l=k({id:"",ruserId:"no1"}),u=$(),s=k({id:"",level:0,total:0,size:14,cur:1}),i=k({sort:0});function _(f=1){E(Object.assign(s,i),f,s.size).then(m=>{u.value=m.data.list,s.total=m.data.total})}function r(){K(n.id,2).then(f=>{Object.assign(n,f.data.article)})}function x(){d.params&&d.params.id&&(n.id=d.params.id)}return p(i,()=>{_()}),p(j,()=>{r(),_(s.cur)}),U(()=>{x(),r(),s.id=n.id,l.id=n.id,_()}),(f,m)=>{const M=T;return c(),v("div",Qe,[t("div",We,[t("a",{href:"/home/"+n.firstCatePathName},o(n.firstCateName===null?"其他":n.firstCateName),9,He),Ke,t("span",null,o(n.title),1)]),t("div",Xe,[P(he,{"init-like-acitve":n.likeActive,data:n},null,8,["init-like-acitve","data"])]),t("div",Ye,[t("div",Ze,o(n.commentCount===null?"0":n.commentCount)+" 评论",1),t("div",et,[t("div",tt,[t("ul",null,[t("li",{class:I(i.sort===0?"on":""),onClick:m[0]||(m[0]=C=>i.sort=0)},"按热度排序",2),t("li",{class:I(i.sort===1?"on":""),onClick:m[1]||(m[1]=C=>i.sort=1)},"按时间排序",2)])]),t("div",at,[P(O,{data:l},null,8,["data"])]),t("div",st,[(c(!0),v(V,null,L(u.value,(C,q)=>(c(),y(Ge,{data:C,key:q},null,8,["data"]))),128))])])]),s.total>s.size?g("",!0):(c(),v("div",nt)),s.total>s.size?(c(),y(M,{key:1,class:"page-div","current-page":s.cur,"onUpdate:currentPage":m[2]||(m[2]=C=>s.cur=C),"page-size":s.size,"onUpdate:pageSize":m[3]||(m[3]=C=>s.size=C),layout:"prev, pager, next, jumper",total:s.total,background:!0,onCurrentChange:_},null,8,["current-page","page-size","total"])):g("",!0)])}}});const vt=A(dt,[["__scopeId","data-v-606761cd"]]);export{vt as default};
