import{d as N,r as h,z as S,w as U,o as $,e as r,f as i,C as c,k as t,l as n,c as d,F as M,g as P,h as m,t as v,G as g,K as T,_ as F}from"./index-7043f5d2.js";import{a as I,E as L,b as j}from"./el-select-790cb6c3.js";import"./el-input-ea2dabc9.js";import"./el-scrollbar-a3a91b86.js";import{E as D,a as G}from"./el-table-column-ca2f0dab.js";import"./el-checkbox-99e20c18.js";import{c as K,d as b}from"./articleapi-65b59442.js";import"./_initCloneObject-cf0c2ff8.js";const O={class:"content-div"},W={class:"head"},q={class:"select-div"},H={key:0},J={key:1},Q={key:2},R={key:3},X=N({__name:"Atce",setup(Y){const k=[{name:"全部",value:-1},{name:"草稿",value:0},{name:"审核中",value:1},{name:"已发布",value:2},{name:"打回",value:3}],f=h(),a=S({total:0,cur:1,size:14}),p=h(-1);function u(o=1){K(p.value,o,a.size).then(l=>{f.value=l.data.list,a.total=l.data.total})}function y(o){a.total%a.size===1&&Math.floor(a.total/a.size)!==0?b(o).then(l=>{g.success(l.message),a.cur--,u(a.cur)}):b(o).then(l=>{g.success(l.message),u(a.cur)})}function C(o){window.location.href="/editarticle/"+o}function z(o){window.open("/preview/"+o)}function E(o){window.open("/article/"+o)}return U(p,()=>{u()}),$(()=>{u()}),(o,l)=>{const x=j,A=I,s=G,_=T,B=D,V=L;return d(),r("div",null,[i("div",O,[i("div",W,[c(" 文章管理 "),i("div",q,[t(A,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=e=>p.value=e),class:"m-2",placeholder:"Select"},{default:n(()=>[(d(),r(M,null,P(k,e=>t(x,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),i("div",null,[t(B,{data:f.value,style:{width:"100%"}},{default:n(()=>[t(s,{"show-overflow-tooltip":!0,prop:"title",label:"标题",width:"150"}),t(s,{prop:"state",label:"状态",width:"100"},{default:n(e=>[e.row.state===0?(d(),r("span",H,"草稿")):m("",!0),e.row.state===1?(d(),r("span",J,"审核中")):m("",!0),e.row.state===2?(d(),r("span",Q,"已发布")):m("",!0),e.row.state===3?(d(),r("span",R,"打回")):m("",!0)]),_:1}),t(s,{prop:"watch",label:"观看数",width:"100"},{default:n(e=>[i("span",null,v(e.row.watch===null?"0":e.row.watch),1)]),_:1}),t(s,{prop:"like",label:"喜欢数",width:"100"},{default:n(e=>[i("span",null,v(e.row.like===null?"0":e.row.commentCount),1)]),_:1}),t(s,{prop:"commentCount",label:"评论数",width:"100"},{default:n(e=>[i("span",null,v(e.row.commentCount===null?"0":e.row.commentCount),1)]),_:1}),t(s,{prop:"time",label:"发布时间",width:"180"}),t(s,{prop:"id",fixed:"right",label:"操作",width:"200"},{default:n(e=>[t(_,{onClick:w=>E(e.row.id),link:"",type:"primary",disabled:e.row.state!==2},{default:n(()=>[c("查看")]),_:2},1032,["onClick","disabled"]),t(_,{onClick:w=>z(e.row.id),link:"",type:"primary",disabled:e.row.state===2},{default:n(()=>[c("预览")]),_:2},1032,["onClick","disabled"]),t(_,{onClick:w=>C(e.row.id),link:"",type:"primary",disabled:e.row.state===1},{default:n(()=>[c("编辑")]),_:2},1032,["onClick","disabled"]),t(_,{onClick:w=>y(e.row.id),link:"",type:"primary"},{default:n(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(V,{class:"page-div","current-page":a.cur,"onUpdate:currentPage":l[1]||(l[1]=e=>a.cur=e),"page-size":a.size,"onUpdate:pageSize":l[2]||(l[2]=e=>a.size=e),layout:"prev, pager, next, jumper",total:a.total,background:!0,onCurrentChange:u},null,8,["current-page","page-size","total"])])])])}}});const ie=F(X,[["__scopeId","data-v-5a4914ab"]]);export{ie as default};
