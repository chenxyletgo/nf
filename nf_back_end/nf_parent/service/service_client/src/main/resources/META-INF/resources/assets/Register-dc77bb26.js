import{d as y,r as B,z as c,e as N,f as p,k as s,l as d,A as z,c as w,m as E,C as u,h as V,t as A,p as T,j as Z,L as M,G as i,M as O,N as U,K as $,_ as F}from"./index-7043f5d2.js";import{E as G,a as L}from"./el-form-item-82fe4575.js";import{E as S}from"./el-input-ea2dabc9.js";import"./_initCloneObject-cf0c2ff8.js";const H=m=>(T("data-v-7bfee60d"),m=m(),Z(),m),D={class:"div-3"},j={class:"div-1"},K=H(()=>p("h3",null,"注册",-1)),q={class:"form"},J={class:"div-2"},P=y({__name:"Register",setup(m){const g=z(),_=B(),l=c({show:!0,count:0,TIME_LENGTH:60}),r=c({name:"",email:"",password:"",confirm:"",emailCode:""});function h(t){t&&t.validate(e=>{e?M(r).then(o=>{i.success(o.message),g.push("/login")}):i.error("输入不正确")})}function v(){if(!O(r.email)){i.error("邮箱格式不正确");return}i.warning("邮箱推送服务器比较拥挤，请耐心等待。"),U(r.email).then(t=>{i.success(t.message),C()})}function C(){l.show=!1,l.count=l.TIME_LENGTH;let t=setInterval(()=>{l.count>0&&l.count<=l.TIME_LENGTH?l.count--:(l.show=!0,clearInterval(t))},1e3)}function I(t){t&&t.resetFields()}const x=c({name:[{validator:(t,e,o)=>{e.indexOf(" ")!==-1?o(new Error("输入不能有空格")):e.trim()===""&&o(new Error("昵称是需要的")),o()}}],email:[{validator:(t,e,o)=>{let n=/^[a-zA-Z0-9]+([-_.][A-Za-zd]+)*@([a-zA-Z0-9]+[-.])+[A-Za-zd]{2,5}$/;e.indexOf(" ")!==-1?o(new Error("输入不能有空格")):e.trim()===""?o(new Error("邮箱是需要的")):n.test(e)||o(new Error("邮箱格式不正确")),o()}}],password:[{validator:(t,e,o)=>{let n=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,16}$/;e.indexOf(" ")!==-1?o(new Error("输入不能有空格")):e.trim()===""?o(new Error("密码是需要的")):n.test(e)||o(new Error("密码长度：[8-16]，内容：[数字和字母的组合]")),o()}}],confirm:[{validator:(t,e,o)=>{e.indexOf(" ")!==-1?o(new Error("输入不能有空格")):e.trim()===""?o(new Error("密码是需要的")):e!==r.password&&o(new Error("密码不一致")),o()}}],emailCode:[{validator:(t,e,o)=>{let n=/^[0-9]{6}$/;e.indexOf(" ")!==-1?o(new Error("输入不能有空格")):e.trim()===""?o(new Error("验证码是需要的")):n.test(e)||o(new Error("验证码长度：[6]，内容：[数字]")),o()}}]});return(t,e)=>{const o=S,n=L,f=$,R=G;return w(),N("div",D,[p("div",j,[K,p("div",q,[s(R,{ref_key:"formRef",ref:_,model:r,"status-icon":"",rules:x,class:"demo-ruleForm"},{default:d(()=>[s(n,{prop:"name"},{default:d(()=>[s(o,{modelValue:r.name,"onUpdate:modelValue":e[0]||(e[0]=a=>r.name=a),placeholder:"昵称",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1}),s(n,{prop:"email"},{default:d(()=>[s(o,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=a=>r.email=a),placeholder:"邮箱",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1}),s(n,{prop:"password"},{default:d(()=>[s(o,{modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=a=>r.password=a),placeholder:"密码",autocomplete:"off",clearable:"","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{prop:"confirm"},{default:d(()=>[s(o,{modelValue:r.confirm,"onUpdate:modelValue":e[3]||(e[3]=a=>r.confirm=a),placeholder:"再次输入密码",autocomplete:"off",clearable:"","show-password":""},null,8,["modelValue"])]),_:1}),s(n,{prop:"emailCode"},{default:d(()=>[p("div",J,[s(o,{modelValue:r.emailCode,"onUpdate:modelValue":e[4]||(e[4]=a=>r.emailCode=a),placeholder:"邮箱验证码",autocomplete:"off",clearable:""},null,8,["modelValue"])]),l.show?(w(),E(f,{key:0,onClick:v},{default:d(()=>[u("发送验证码")]),_:1})):V("",!0),l.show?V("",!0):(w(),E(f,{key:1,disabled:""},{default:d(()=>[u("      "+A(l.count<10?"  "+l.count:l.count)+"s      ",1)]),_:1}))]),_:1}),s(n,null,{default:d(()=>[s(f,{onClick:e[5]||(e[5]=a=>h(_.value)),type:"primary"},{default:d(()=>[u("注册")]),_:1}),s(f,{onClick:e[6]||(e[6]=a=>I(_.value))},{default:d(()=>[u("清空")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])])}}});const k=F(P,[["__scopeId","data-v-7bfee60d"]]);export{k as default};
