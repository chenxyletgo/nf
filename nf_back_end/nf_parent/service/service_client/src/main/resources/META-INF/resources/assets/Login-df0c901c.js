import{d as I,r as _,z as c,o as z,e as A,f as l,k as s,l as d,A as B,B as Z,c as y,C as h,p as R,j as U,D as $,G as w,H as L,I as F,J as v,K as N,_ as O}from"./index-7043f5d2.js";import{E as S,a as D}from"./el-form-item-82fe4575.js";import{E as M}from"./el-input-ea2dabc9.js";import"./_initCloneObject-cf0c2ff8.js";const C=i=>(R("data-v-48a1d61e"),i=i(),U(),i),j={class:"div-2"},G={class:"div-1"},H=C(()=>l("h3",null,"登录",-1)),J={class:"div-3"},K=["src"],P=C(()=>l("a",{href:"#",class:"forgetLink"},"忘记密码？",-1)),T=I({__name:"Login",setup(i){const E=B(),p=_(),m=_(),r=c({email:"",password:"",checkCode:""});function u(){m.value=Z()}function g(a){a&&a.validate(e=>{e?$(r).then(o=>{w.success(o.message),L.set("nf_token",o.data.token,{domain:F}),v.name=o.data.name,v.avatar=o.data.avatar,E.push("/home")}):w.error("输入不正确")})}function V(a){a&&a.resetFields()}z(()=>{u()});const k=c({email:[{validator:(a,e,o)=>{let t=/^[a-zA-Z0-9]+([-_.][A-Za-zd]+)*@([a-zA-Z0-9]+[-.])+[A-Za-zd]{2,5}$/;e.indexOf(" ")!==-1?o(new Error("输入不能有空格")):e.trim()===""?o(new Error("邮箱是需要的")):t.test(e)||o(new Error("邮箱格式不正确")),o()}}],password:[{validator:(a,e,o)=>{let t=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,16}$/;e.indexOf(" ")!==-1?o(new Error("输入不能有空格")):e.trim()===""?o(new Error("密码是需要的")):t.test(e)||o(new Error("密码长度：[8-16]，内容：[数字和字母的组合]")),o()}}],checkCode:[{validator:(a,e,o)=>{let t=/^[0-9A-Za-z]{5}$/;e.indexOf(" ")!==-1?o(new Error("输入不能有空格")):e.trim()===""?o(new Error("验证码是需要的")):t.test(e)||o(new Error("验证码长度：[5]，内容：[数字或字母]")),o()}}]});return(a,e)=>{const o=M,t=D,f=N,x=S;return y(),A("div",j,[l("div",G,[H,s(x,{model:r,ref_key:"formRef",ref:p,rules:k,"status-icon":""},{default:d(()=>[s(t,{prop:"email"},{default:d(()=>[s(o,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=n=>r.email=n),placeholder:"邮箱",autocomplete:"off",clearable:""},null,8,["modelValue"])]),_:1}),s(t,{prop:"password"},{default:d(()=>[s(o,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=n=>r.password=n),type:"password",placeholder:"密码",autocomplete:"off","show-password":""},null,8,["modelValue"])]),_:1}),s(t,{prop:"checkCode"},{default:d(()=>[l("div",J,[s(o,{modelValue:r.checkCode,"onUpdate:modelValue":e[2]||(e[2]=n=>r.checkCode=n),placeholder:"验证码",autocomplete:"off",clearable:""},null,8,["modelValue"])]),l("img",{class:"codeImg",onClick:u,src:m.value},null,8,K)]),_:1}),s(t,null,{default:d(()=>[s(f,{type:"primary",onClick:e[3]||(e[3]=n=>g(p.value))},{default:d(()=>[h("登录")]),_:1}),s(f,{onClick:e[4]||(e[4]=n=>V(p.value))},{default:d(()=>[h("清空")]),_:1}),P]),_:1})]),_:1},8,["model","rules"])])])}}});const Y=O(T,[["__scopeId","data-v-48a1d61e"]]);export{Y as default};
