import{S as de,g as te,q as fe,h as me,V as ve,a3 as pe,f as W,a4 as ye,X,d as Y,D as R,r as b,j as ge,i as J,a as P,o as O,y as H,z as V,A as E,E as o,C as Ce,w as T,c as j,R as be,J as q,P as se,b as B,t as he,n as Ee,a1 as ke,p as we,l as Me,m as De,a5 as Se,v as Te,T as Be,a6 as Ie}from"./index-ab009072.js";import{L as K,u as _,G as ne,h as Z,M as Le,a as Fe,r as Oe,b as G,g as x,i as Pe,e as $e,_ as le,N as Ae,C as ze,O as Ne,P as Re,f as Q,w as Ye}from"./_plugin-vue_export-helper-fce371f0.js";import{P as U}from"./vnode-a64dafff.js";import{a as Ve,b as Xe}from"./base-79093b69.js";import{F as He,a as Ue}from"./el-popper-0ed80320.js";import{U as ae}from"./use-form-item-39f90e30.js";import{t as We,u as ee}from"./base-d6d5ede7.js";import{i as je}from"./el-table-column-b44b7a6f.js";import{u as oe}from"./index-c508dcf5.js";const qe=(...e)=>t=>{e.forEach(a=>{de(a)?a(t):a.value=t})},Ke=(e,t,a)=>{let r={offsetX:0,offsetY:0};const u=n=>{const c=n.clientX,v=n.clientY,{offsetX:f,offsetY:p}=r,s=e.value.getBoundingClientRect(),m=s.left,k=s.top,$=s.width,A=s.height,z=document.documentElement.clientWidth,I=document.documentElement.clientHeight,N=-m+f,L=-k+p,w=z-m-$+f,M=I-k-A+p,F=h=>{const l=Math.min(Math.max(f+h.clientX-c,N),w),C=Math.min(Math.max(p+h.clientY-v,L),M);r={offsetX:l,offsetY:C},e.value.style.transform=`translate(${K(l)}, ${K(C)})`},y=()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",y)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",u)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};te(()=>{fe(()=>{a.value?d():i()})}),me(()=>{i()})},xe=(e,t={})=>{ve(e)||We("[useLockscreen]","You need to pass a ref param to this function");const a=t.ns||_("popup"),r=pe(()=>a.bm("parent","hidden"));if(!ne||Z(document.body,r.value))return;let u=0,d=!1,i="0";const n=()=>{setTimeout(()=>{Oe(document==null?void 0:document.body,r.value),d&&document&&(document.body.style.width=i)},200)};W(e,c=>{if(!c){n();return}d=!Z(document.body,r.value),d&&(i=document.body.style.width),u=je(a.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=Le(document.body,"overflowY");u>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${u}px)`),Fe(document.body,r.value)}),ye(()=>n())},re=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let t=!1,a=!1;return{onClick:i=>{t&&a&&e(i),t=a=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{a=i.target===i.currentTarget}}},_e=G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),Ge={click:e=>e instanceof MouseEvent},Je="overlay";var Ze=Y({name:"ElOverlay",props:_e,emits:Ge,setup(e,{slots:t,emit:a}){const r=_(Je),u=c=>{a("click",c)},{onClick:d,onMousedown:i,onMouseup:n}=re(e.customMaskEvent?void 0:u);return()=>e.mask?R("div",{class:[r.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:i,onMouseup:n},[b(t,"default")],U.STYLE|U.CLASS|U.PROPS,["onClick","onMouseup","onMousedown"]):ge("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[b(t,"default")])}});const Qe=Ze,ie=Symbol("dialogInjectionKey"),ue=G({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Pe},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),eo={close:()=>!0},oo=["aria-label"],to=["id"],so=Y({name:"ElDialogContent"}),no=Y({...so,props:ue,emits:eo,setup(e){const t=e,{t:a}=Ve(),{Close:r}=Ae,{dialogRef:u,headerRef:d,bodyId:i,ns:n,style:c}=J(ie),{focusTrapRef:v}=J(He),f=qe(v,u),p=P(()=>t.draggable);return Ke(u,d,p),(s,m)=>(O(),H("div",{ref:o(f),class:E([o(n).b(),o(n).is("fullscreen",s.fullscreen),o(n).is("draggable",o(p)),o(n).is("align-center",s.alignCenter),{[o(n).m("center")]:s.center},s.customClass]),style:se(o(c)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:d,class:E(o(n).e("header"))},[b(s.$slots,"header",{},()=>[V("span",{role:"heading",class:E(o(n).e("title"))},Ce(s.title),3)]),s.showClose?(O(),H("button",{key:0,"aria-label":o(a)("el.dialog.close"),class:E(o(n).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=k=>s.$emit("close"))},[R(o($e),{class:E(o(n).e("close"))},{default:T(()=>[(O(),j(be(s.closeIcon||o(r))))]),_:1},8,["class"])],10,oo)):q("v-if",!0)],2),V("div",{id:o(i),class:E(o(n).e("body"))},[b(s.$slots,"default")],10,to),s.$slots.footer?(O(),H("footer",{key:0,class:E(o(n).e("footer"))},[b(s.$slots,"footer")],2)):q("v-if",!0)],6))}});var lo=le(no,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ao=G({...ue,appendToBody:{type:Boolean,default:!1},beforeClose:{type:x(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ro={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>ze(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},io=(e,t)=>{const r=Ee().emit,{nextZIndex:u}=Ne();let d="";const i=ee(),n=ee(),c=B(!1),v=B(!1),f=B(!1),p=B(e.zIndex||u());let s,m;const k=Xe("namespace",Re),$=P(()=>{const g={},S=`--${k.value}-dialog`;return e.fullscreen||(e.top&&(g[`${S}-margin-top`]=e.top),e.width&&(g[`${S}-width`]=K(e.width))),g}),A=P(()=>e.alignCenter?{display:"flex"}:{});function z(){r("opened")}function I(){r("closed"),r(ae,!1),e.destroyOnClose&&(f.value=!1)}function N(){r("close")}function L(){m==null||m(),s==null||s(),e.openDelay&&e.openDelay>0?{stop:s}=Q(()=>y(),e.openDelay):y()}function w(){s==null||s(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=Q(()=>h(),e.closeDelay):h()}function M(){function g(S){S||(v.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(g):w()}function F(){e.closeOnClickModal&&M()}function y(){ne&&(c.value=!0)}function h(){c.value=!1}function l(){r("openAutoFocus")}function C(){r("closeAutoFocus")}function D(g){var S;((S=g.detail)==null?void 0:S.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&xe(c);function ce(){e.closeOnPressEscape&&M()}return W(()=>e.modelValue,g=>{g?(v.value=!1,L(),f.value=!0,p.value=e.zIndex?p.value++:u(),he(()=>{r("open"),t.value&&(t.value.scrollTop=0)})):c.value&&w()}),W(()=>e.fullscreen,g=>{t.value&&(g?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),te(()=>{e.modelValue&&(c.value=!0,f.value=!0,L())}),{afterEnter:z,afterLeave:I,beforeLeave:N,handleClose:M,onModalClick:F,close:w,doClose:h,onOpenAutoFocus:l,onCloseAutoFocus:C,onCloseRequested:ce,onFocusoutPrevented:D,titleId:i,bodyId:n,closed:v,style:$,overlayDialogStyle:A,rendered:f,visible:c,zIndex:p}},uo=["aria-label","aria-labelledby","aria-describedby"],co=Y({name:"ElDialog",inheritAttrs:!1}),fo=Y({...co,props:ao,emits:ro,setup(e,{expose:t}){const a=e,r=ke();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},P(()=>!!r.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},P(()=>!!a.customClass));const u=_("dialog"),d=B(),i=B(),n=B(),{visible:c,titleId:v,bodyId:f,style:p,overlayDialogStyle:s,rendered:m,zIndex:k,afterEnter:$,afterLeave:A,beforeLeave:z,handleClose:I,onModalClick:N,onOpenAutoFocus:L,onCloseAutoFocus:w,onCloseRequested:M,onFocusoutPrevented:F}=io(a,d);we(ie,{dialogRef:d,headerRef:i,bodyId:f,ns:u,rendered:m,style:p});const y=re(N),h=P(()=>a.draggable&&!a.fullscreen);return t({visible:c,dialogContentRef:n}),(l,C)=>(O(),j(Ie,{to:"body",disabled:!l.appendToBody},[R(Be,{name:"dialog-fade",onAfterEnter:o($),onAfterLeave:o(A),onBeforeLeave:o(z),persisted:""},{default:T(()=>[Me(R(o(Qe),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(k)},{default:T(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(f),class:E(`${o(u).namespace.value}-overlay-dialog`),style:se(o(s)),onClick:C[0]||(C[0]=(...D)=>o(y).onClick&&o(y).onClick(...D)),onMousedown:C[1]||(C[1]=(...D)=>o(y).onMousedown&&o(y).onMousedown(...D)),onMouseup:C[2]||(C[2]=(...D)=>o(y).onMouseup&&o(y).onMouseup(...D))},[R(o(Ue),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(w),onFocusoutPrevented:o(F),onReleaseRequested:o(M)},{default:T(()=>[o(m)?(O(),j(lo,De({key:0,ref_key:"dialogContentRef",ref:n},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(h),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(I)}),Se({header:T(()=>[l.$slots.title?b(l.$slots,"title",{key:1}):b(l.$slots,"header",{key:0,close:o(I),titleId:o(v),titleClass:o(u).e("title")})]),default:T(()=>[b(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:T(()=>[b(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):q("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,uo)]),_:3},8,["mask","overlay-class","z-index"]),[[Te,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var mo=le(fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const wo=Ye(mo);export{wo as E};
