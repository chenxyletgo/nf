import"./base-d6d5ede7.js";import{E as O}from"./el-overlay-7b33b329.js";import{E as G,a as K,d as Q}from"./el-table-column-b44b7a6f.js";import{E as W,a as X,b as Z,c as ee}from"./el-form-item-e12a39b4.js";import"./el-popper-0ed80320.js";import"./el-checkbox-0d42ff32.js";import{a as te,E as ae}from"./el-date-picker-42a3ef67.js";import{d as oe,b as c,e as D,g as le,y as ne,z as r,D as t,w as o,c as se,J as ie,F as re,L as de,o as A,B as p,C as b}from"./index-ab009072.js";import{g as ue,a as B}from"./articleapi-b4e070a3.js";import{g as pe}from"./categoryapi-3b68377c.js";import{E as M}from"./base-79093b69.js";import{q as me}from"./_plugin-vue_export-helper-fce371f0.js";import"./vnode-a64dafff.js";import"./use-form-item-39f90e30.js";import"./index-c508dcf5.js";import"./aria-06e80a3d.js";const ce={class:"div-1"},fe={style:{width:"150px"}},_e={style:{"margin-left":"254px"}},ve={style:{width:"100px",display:"flex"}},ge={class:"div-2"},Ce={class:"div-buts"},ye={class:"dialog-footer"},we=["src"],ke=oe({__name:"ArticleReview",setup(Ve){const y=c(),U={children:"children",label:"name",value:"id"},m=c(""),f=c(""),n=D({title:"",state:"1",preDate:"",sufDate:"",firstCategoryId:"",secondCategoryId:""}),E=c(),l=D({total:0,size:14,cur:1}),i=D({id:"",msg:-1,reason:""}),g=c(!1),w=c(!1),k=c();function Y(){_()}function P(){f.value="",m.value="",n.title="",n.preDate="",n.sufDate="",n.firstCategoryId="",n.secondCategoryId="",_()}function F(){pe().then(s=>{y.value=s.data.list,de(y)})}function _(s=1){T(),ue(n,s,l.size).then(a=>{E.value=a.data.list,l.total=a.data.total})}function T(){f.value!==""&&(n.preDate=f.value[0],n.sufDate=f.value[1]),m.value!==""&&(n.firstCategoryId=m.value[0],m.value.length===2&&(n.secondCategoryId=m.value[1]))}function z(s,a,C){l.total%l.size===1&&Math.floor(l.total/l.size)!==0?(console.log(l.total%l.size===1&&Math.floor(l.total/l.size)!==0),B(s,a,C).then(d=>{M.success(d.message),l.cur--,_(l.cur),V(),g.value=!1})):B(s,a,C).then(d=>{M.success(d.message),_(l.cur),V(),g.value=!1})}function N(s){window.open("/preview/"+s)}function $(s,a){i.id=s,i.msg=a,g.value=!0}function H(){i.reason=""}function V(){i.id="",i.msg=-1,i.reason=""}function L(s){k.value=s,w.value=!0}function R(){k.value=""}return le(()=>{F(),_()}),(s,a)=>{const C=X,d=Z,S=te,j=ae,u=ee,x=W,v=Q,q=G,J=K,I=O;return A(),ne(re,null,[r("div",ce,[t(x,{model:n,inline:!0,class:"demo-form-inline","status-icon":""},{default:o(()=>[t(d,{prop:"title"},{default:o(()=>[t(C,{modelValue:n.title,"onUpdate:modelValue":a[0]||(a[0]=e=>n.title=e),placeholder:"标题"},null,8,["modelValue"])]),_:1}),t(d,{prop:"areas"},{default:o(()=>[r("div",fe,[t(S,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),options:y.value,props:U,placeholder:"类别",clearable:""},null,8,["modelValue","options"])])]),_:1}),t(d,{prop:"dates"},{default:o(()=>[t(j,{modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),type:"datetimerange","range-separator":"To","start-placeholder":"起始日期-修改","end-placeholder":"截止日期-修改",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(d,null,{default:o(()=>[r("div",_e,[r("div",ve,[t(u,{type:"primary",onClick:Y},{default:o(()=>[p("搜索")]),_:1}),t(u,{onClick:P},{default:o(()=>[p("清空")]),_:1})])])]),_:1})]),_:1},8,["model"])]),r("div",ge,[t(q,{data:E.value,style:{width:"100%"}},{default:o(()=>[t(v,{"show-overflow-tooltip":!0,prop:"title",label:"标题",width:"200"}),t(v,{prop:"user",label:"发布者",width:"180"},{default:o(e=>[r("span",null,b(e.row.user.name),1)]),_:1}),t(v,{prop:"firstCategory",label:"一级类别",width:"180"},{default:o(e=>[r("span",null,b(e.row.firstCategory===null?"其他":e.row.firstCategory.name),1)]),_:1}),t(v,{prop:"secondCategory",label:"二级类别",width:"180"},{default:o(e=>[r("span",null,b(e.row.secondCategory===null?"其他":e.row.secondCategory.name),1)]),_:1}),t(v,{prop:"modifyTime",label:"修改时间",width:"250"}),t(v,{prop:"id",label:"操作",fixed:"right"},{default:o(e=>[r("div",Ce,[t(u,{onClick:h=>z(e.row.id,2),link:"",type:"primary"},{default:o(()=>[p("通过")]),_:2},1032,["onClick"]),t(u,{onClick:h=>$(e.row.id,3),link:"",type:"primary"},{default:o(()=>[p("打回")]),_:2},1032,["onClick"]),t(u,{onClick:h=>L(e.row.cover),link:"",type:"primary",disabled:e.row.cover===null},{default:o(()=>[p("封面预览")]),_:2},1032,["onClick","disabled"]),t(u,{onClick:h=>N(e.row.id),link:"",type:"primary"},{default:o(()=>[p("文章预览")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),r("div",null,[l.total>l.size?(A(),se(J,{key:0,class:"page-div","current-page":l.cur,"onUpdate:currentPage":a[3]||(a[3]=e=>l.cur=e),"page-size":l.size,"onUpdate:pageSize":a[4]||(a[4]=e=>l.size=e),layout:"prev, pager, next, jumper",total:l.total,background:!0,onCurrentChange:_},null,8,["current-page","page-size","total"])):ie("",!0)]),t(I,{modelValue:g.value,"onUpdate:modelValue":a[7]||(a[7]=e=>g.value=e),title:"打回原因",width:"30%",onClose:V},{footer:o(()=>[r("span",ye,[t(u,{onClick:a[6]||(a[6]=e=>z(i.id,i.msg,i.reason))},{default:o(()=>[p("提交")]),_:1}),t(u,{onClick:H},{default:o(()=>[p("清空")]),_:1})])]),default:o(()=>[t(x,{data:i},{default:o(()=>[t(d,{prop:"name"},{default:o(()=>[t(C,{modelValue:i.reason,"onUpdate:modelValue":a[5]||(a[5]=e=>i.reason=e),placeholder:"原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"]),t(I,{modelValue:w.value,"onUpdate:modelValue":a[8]||(a[8]=e=>w.value=e),onClose:R},{default:o(()=>[r("img",{class:"img-div",src:k.value},null,8,we)]),_:1},8,["modelValue"])],64)}}});const $e=me(ke,[["__scopeId","data-v-657561a8"]]);export{$e as default};
