import"./base-d6d5ede7.js";import{E as j,a as q,b as J,c as K,d as G}from"./el-table-column-b44b7a6f.js";import{E as Q,a as R,b as W,c as X}from"./el-form-item-e12a39b4.js";import"./el-popper-0ed80320.js";import"./el-checkbox-0d42ff32.js";import{a as Z,E as ee}from"./el-date-picker-42a3ef67.js";import{d as te,b as y,e as V,g as le,y as v,z as r,D as t,w as a,c as ae,J as h,F as x,L as oe,o as _,K as ne,B as p,C as k}from"./index-ab009072.js";import{g as se,s as re,d as A}from"./articleapi-b4e070a3.js";import{g as ie}from"./categoryapi-3b68377c.js";import{E}from"./base-79093b69.js";import{q as de}from"./_plugin-vue_export-helper-fce371f0.js";import"./use-form-item-39f90e30.js";import"./index-c508dcf5.js";import"./aria-06e80a3d.js";const ue={class:"div-1"},ce={style:{width:"150px"}},pe={style:{width:"120px"}},me={style:{"margin-left":"102px"}},_e={style:{width:"100px",display:"flex"}},fe={class:"div-2"},ve={key:0},ge={key:1},ye={key:2},he={class:"div-buts"},we=te({__name:"ArticleList",setup(Ce){const z=[{name:"默认",value:0},{name:"推荐",value:1},{name:"置顶",value:2}],w=y(),L={children:"children",label:"name",value:"id"},d=y(""),m=y(""),n=V({title:"",level:"",state:"2",preDate:"",sufDate:"",firstCategoryId:"",secondCategoryId:""}),D=y(),o=V({total:0,size:14,cur:1});function I(){u()}function Y(){m.value="",d.value="",n.title="",n.level="",n.preDate="",n.sufDate="",n.firstCategoryId="",n.secondCategoryId="",u()}function M(){ie().then(s=>{w.value=s.data.list,oe(w)})}function u(s=1){B(),se(n,s,o.size).then(l=>{D.value=l.data.list,o.total=l.data.total})}function B(){m.value!==""&&(n.preDate=m.value[0],n.sufDate=m.value[1]),d.value!==""&&(n.firstCategoryId=d.value[0],d.value.length===2&&(n.secondCategoryId=d.value[1]))}function C(s,l){re(s,l).then(b=>{E.success(b.message),u(o.cur)})}function T(s){o.total%o.size===1&&Math.floor(o.total/o.size)!==0?A(s).then(l=>{E.success(l.message),o.cur--,u(o.cur)}):A(s).then(l=>{E.success(l.message),u(o.cur)})}function U(s){window.open("http://localhost:7770/article/"+s)}return le(()=>{M(),u()}),(s,l)=>{const b=R,f=W,F=Z,$=ee,H=J,N=K,c=X,P=Q,i=G,S=j,O=q;return _(),v(x,null,[r("div",ue,[t(P,{model:n,inline:!0,class:"demo-form-inline","status-icon":""},{default:a(()=>[t(f,{prop:"title"},{default:a(()=>[t(b,{modelValue:n.title,"onUpdate:modelValue":l[0]||(l[0]=e=>n.title=e),placeholder:"标题"},null,8,["modelValue"])]),_:1}),t(f,{prop:"areas"},{default:a(()=>[r("div",ce,[t(F,{modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),options:w.value,props:L,placeholder:"类别",clearable:""},null,8,["modelValue","options"])])]),_:1}),t(f,{prop:"dates"},{default:a(()=>[t($,{modelValue:m.value,"onUpdate:modelValue":l[2]||(l[2]=e=>m.value=e),type:"datetimerange","range-separator":"To","start-placeholder":"起始日期-修改","end-placeholder":"截止日期-修改",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),t(f,{prop:"level"},{default:a(()=>[r("div",pe,[t(N,{modelValue:n.level,"onUpdate:modelValue":l[3]||(l[3]=e=>n.level=e),clearable:"",placeholder:"文章级别"},{default:a(()=>[(_(),v(x,null,ne(z,e=>t(H,{key:e.value,label:e.name,value:e.value,clearable:""},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1}),t(f,null,{default:a(()=>[r("div",me,[r("div",_e,[t(c,{type:"primary",onClick:I},{default:a(()=>[p("搜索")]),_:1}),t(c,{onClick:Y},{default:a(()=>[p("清空")]),_:1})])])]),_:1})]),_:1},8,["model"])]),r("div",fe,[t(S,{data:D.value,style:{width:"100%"}},{default:a(()=>[t(i,{"show-overflow-tooltip":!0,prop:"title",label:"标题",width:"160"}),t(i,{prop:"user",label:"发布者",width:"120"},{default:a(e=>[r("span",null,k(e.row.user.name),1)]),_:1}),t(i,{prop:"watch",label:"观看次数",width:"120"}),t(i,{prop:"firstCategory",label:"一级类别",width:"120"},{default:a(e=>[r("span",null,k(e.row.firstCategory===null?"其他":e.row.firstCategory.name),1)]),_:1}),t(i,{prop:"secondCategory",label:"二级类别",width:"120"},{default:a(e=>[r("span",null,k(e.row.secondCategory===null?"其他":e.row.secondCategory.name),1)]),_:1}),t(i,{prop:"level",label:"级别",width:"120"},{default:a(e=>[e.row.level==="0"?(_(),v("span",ve,"默认")):h("",!0),e.row.level==="1"?(_(),v("span",ge,"推荐")):h("",!0),e.row.level==="2"?(_(),v("span",ye,"置顶")):h("",!0)]),_:1}),t(i,{prop:"modifyTime",label:"修改时间",width:"200"}),t(i,{prop:"id",label:"操作",fixed:"right"},{default:a(e=>[r("div",he,[t(c,{onClick:g=>C(e.row.id,0),disabled:e.row.level==="0",link:"",type:"primary"},{default:a(()=>[p("默认")]),_:2},1032,["onClick","disabled"]),t(c,{onClick:g=>C(e.row.id,1),disabled:e.row.level==="1",link:"",type:"primary"},{default:a(()=>[p("推荐")]),_:2},1032,["onClick","disabled"]),t(c,{onClick:g=>C(e.row.id,2),disabled:e.row.level==="2",link:"",type:"primary"},{default:a(()=>[p("置顶")]),_:2},1032,["onClick","disabled"]),t(c,{link:"",type:"primary",onClick:g=>U(e.row.id)},{default:a(()=>[p("文章链接")]),_:2},1032,["onClick"]),t(c,{onClick:g=>T(e.row.id),link:"",type:"primary"},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),r("div",null,[o.total>o.size?(_(),ae(O,{key:0,class:"page-div","current-page":o.cur,"onUpdate:currentPage":l[4]||(l[4]=e=>o.cur=e),"page-size":o.size,"onUpdate:pageSize":l[5]||(l[5]=e=>o.size=e),layout:"prev, pager, next, jumper",total:o.total,background:!0,onCurrentChange:u},null,8,["current-page","page-size","total"])):h("",!0)])],64)}}});const Ue=de(we,[["__scopeId","data-v-9cf7f54d"]]);export{Ue as default};
