import"./base-d6d5ede7.js";import{E as te}from"./el-overlay-7b33b329.js";import{E as ae,a as le,b as oe,c as ne,d as de}from"./el-table-column-b44b7a6f.js";import{E as se,a as ue,b as re,c as ie}from"./el-form-item-e12a39b4.js";import"./el-popper-0ed80320.js";import"./el-checkbox-0d42ff32.js";import{d as me,e as y,b as g,g as pe,y as U,z as s,D as a,w as l,c as x,J as P,F as z,o as C,K as O,B as r,C as j,a2 as D,H as fe,I as ce}from"./index-ab009072.js";import{a as _e,b as ve,c as ge,d as q,e as Ce,f as Ve}from"./categoryapi-3b68377c.js";import{E as _}from"./base-79093b69.js";import{q as ye}from"./_plugin-vue_export-helper-fce371f0.js";import"./vnode-a64dafff.js";import"./use-form-item-39f90e30.js";import"./index-c508dcf5.js";const he=h=>(fe("data-v-e94c5736"),h=h(),ce(),h),ke={class:"div-1"},Ne={style:{width:"90px"}},be={style:{"margin-left":"666px"}},we={style:{width:"100px",display:"flex"}},Ee={class:"div-2"},Ie={class:"div-buts"},Fe=he(()=>s("span",null,"分类分为一级和二级，请选择你要添加的种类。",-1)),Ue={class:"dialog-footer"},xe={class:"dialog-footer"},ze={class:"dialog-footer"},De={class:"dialog-footer"},Be=me({__name:"CategoryList",setup(h){const H=[{name:"一级",value:1},{name:"二级",value:2}],m=y({name:"",level:""}),B=g(),o=y({total:0,size:14,cur:1}),w=g(!1),E=g(!1),I=g(!1),k=g(!1),F=g(),f=y({name:"",pathName:""}),c=y({name:"",fatherId:""}),d=y({id:"",name:"",pathName:""});function J(){p()}function K(){m.name="",m.level="",p()}function p(n=1){_e(m,n,o.size).then(e=>{B.value=e.data.list,o.total=e.data.total})}function G(){ve().then(n=>{F.value=n.data.list})}function Q(){F.value=[],A()}function L(){f.name="",f.pathName=""}function A(){c.name="",c.fatherId=""}function S(n){if(D(n.name)){_.error("名称不能为空");return}if("pathName"in n&&D(n.pathName)){_.error("路径名不能为空");return}if("fatherId"in n&&D(n.fatherId)){_.error("父级不能为空");return}ge(n).then(e=>{_.success(e.message),p(o.cur)})}function R(n){o.total%o.size===1&&Math.floor(o.total/o.size)!==0?q(n).then(e=>{_.success(e.message),o.cur--,p(o.cur)}):q(n).then(e=>{_.success(e.message),p(o.cur)})}function W(n){Ce(n).then(e=>{d.id=e.data.category.id,d.name=e.data.category.name,d.pathName=e.data.category.pathName,k.value=!0})}function X(){d.pathName===null&&(d.pathName="-1"),Ve(d).then(n=>{_.success(n.message),k.value=!1,p(o.cur)})}function $(){d.id="",d.name="",d.pathName=""}return pe(()=>{p()}),(n,e)=>{const v=ue,i=re,T=oe,M=ne,u=ie,N=se,V=de,Y=ae,Z=le,b=te;return C(),U(z,null,[s("div",ke,[a(N,{model:m,inline:!0,class:"demo-form-inline","status-icon":""},{default:l(()=>[a(i,{prop:"name"},{default:l(()=>[a(v,{modelValue:m.name,"onUpdate:modelValue":e[0]||(e[0]=t=>m.name=t),placeholder:"名称"},null,8,["modelValue"])]),_:1}),a(i,{prop:"level"},{default:l(()=>[s("div",Ne,[a(M,{modelValue:m.level,"onUpdate:modelValue":e[1]||(e[1]=t=>m.level=t),clearable:"",placeholder:"级别"},{default:l(()=>[(C(),U(z,null,O(H,t=>a(T,{key:t.value,label:t.name,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1}),a(i,null,{default:l(()=>[s("div",be,[s("div",we,[a(u,{onClick:e[2]||(e[2]=t=>w.value=!0)},{default:l(()=>[r("添加类别")]),_:1}),a(u,{type:"primary",onClick:J},{default:l(()=>[r("搜索")]),_:1}),a(u,{onClick:K},{default:l(()=>[r("清空")]),_:1})])])]),_:1})]),_:1},8,["model"])]),s("div",Ee,[a(Y,{data:B.value,style:{width:"100%"}},{default:l(()=>[a(V,{prop:"name",label:"名称",width:"230"}),a(V,{prop:"pathName",label:"路径名称",width:"230"},{default:l(t=>[s("span",null,j(t.row.pathName===null?"无":t.row.pathName),1)]),_:1}),a(V,{prop:"fatherId",label:"级别",width:"230"},{default:l(t=>[s("span",null,j(t.row.fatherId==="0"?"一级":"二级"),1)]),_:1}),a(V,{prop:"createTime",label:"创建时间",width:"300"}),a(V,{prop:"id",label:"操作",fixed:"right"},{default:l(t=>[s("div",Ie,[a(u,{onClick:ee=>W(t.row.id),link:"",type:"primary"},{default:l(()=>[r("修改")]),_:2},1032,["onClick"]),a(u,{onClick:ee=>R(t.row.id),link:"",type:"primary"},{default:l(()=>[r("删除")]),_:2},1032,["onClick"])])]),_:1})]),_:1},8,["data"])]),s("div",null,[o.total>o.size?(C(),x(Z,{key:0,class:"page-div","current-page":o.cur,"onUpdate:currentPage":e[3]||(e[3]=t=>o.cur=t),"page-size":o.size,"onUpdate:pageSize":e[4]||(e[4]=t=>o.size=t),layout:"prev, pager, next, jumper",total:o.total,background:!0,onCurrentChange:p},null,8,["current-page","page-size","total"])):P("",!0)]),a(b,{modelValue:w.value,"onUpdate:modelValue":e[7]||(e[7]=t=>w.value=t),title:"Tips",width:"30%"},{footer:l(()=>[s("span",Ue,[a(u,{onClick:e[5]||(e[5]=t=>E.value=!0)},{default:l(()=>[r("创建一级分类")]),_:1}),a(u,{onClick:e[6]||(e[6]=t=>I.value=!0)},{default:l(()=>[r("创建二级分类")]),_:1})])]),default:l(()=>[Fe]),_:1},8,["modelValue"]),a(b,{modelValue:E.value,"onUpdate:modelValue":e[11]||(e[11]=t=>E.value=t),title:"创建一级分类",width:"30%",onClose:L},{footer:l(()=>[s("span",xe,[a(u,{onClick:e[10]||(e[10]=t=>S(f))},{default:l(()=>[r("提交")]),_:1}),a(u,{onClick:L},{default:l(()=>[r("清空")]),_:1})])]),default:l(()=>[a(N,null,{default:l(()=>[a(i,null,{default:l(()=>[a(v,{modelValue:f.name,"onUpdate:modelValue":e[8]||(e[8]=t=>f.name=t),placeholder:"类别名（最多八个字符）"},null,8,["modelValue"])]),_:1}),a(i,null,{default:l(()=>[a(v,{modelValue:f.pathName,"onUpdate:modelValue":e[9]||(e[9]=t=>f.pathName=t),placeholder:"路径名（最多16个小写字母）"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(b,{modelValue:I.value,"onUpdate:modelValue":e[15]||(e[15]=t=>I.value=t),title:"创建二级分类",width:"30%",onOpen:G,onClose:Q},{footer:l(()=>[s("span",ze,[a(u,{onClick:e[14]||(e[14]=t=>S(c))},{default:l(()=>[r("提交")]),_:1}),a(u,{onClick:A},{default:l(()=>[r("清空")]),_:1})])]),default:l(()=>[a(N,null,{default:l(()=>[a(i,null,{default:l(()=>[a(v,{modelValue:c.name,"onUpdate:modelValue":e[12]||(e[12]=t=>c.name=t),placeholder:"类别名（最多八个字符）"},null,8,["modelValue"])]),_:1}),a(i,null,{default:l(()=>[a(M,{modelValue:c.fatherId,"onUpdate:modelValue":e[13]||(e[13]=t=>c.fatherId=t),clearable:"",placeholder:"所属分类"},{default:l(()=>[(C(!0),U(z,null,O(F.value,t=>(C(),x(T,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(b,{modelValue:k.value,"onUpdate:modelValue":e[18]||(e[18]=t=>k.value=t),title:"修改类别",width:"30%",onClose:$},{footer:l(()=>[s("span",De,[a(u,{onClick:X},{default:l(()=>[r("提交")]),_:1}),a(u,{onClick:$},{default:l(()=>[r("清空")]),_:1})])]),default:l(()=>[a(N,{data:d},{default:l(()=>[a(i,{prop:"name"},{default:l(()=>[a(v,{modelValue:d.name,"onUpdate:modelValue":e[16]||(e[16]=t=>d.name=t),placeholder:"名称（最多八个字符）"},null,8,["modelValue"])]),_:1}),d.pathName!==null?(C(),x(i,{key:0,prop:"pathName"},{default:l(()=>[a(v,{modelValue:d.pathName,"onUpdate:modelValue":e[17]||(e[17]=t=>d.pathName=t),placeholder:"路径名称（最多16个小写字母）"},null,8,["modelValue"])]),_:1})):P("",!0)]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}});const Ge=ye(Be,[["__scopeId","data-v-e94c5736"]]);export{Ge as default};
